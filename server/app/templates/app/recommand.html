{% extends 'common/base.html' %}
{% block content %}
{% load static %}


<!-- Section -->
<div class="container-fluid dark section no-padding">
	<div class="container">
		<div class="row">
			<div class="col-sm-12">
				<ul class="horz-menu center-menu">
					<li class="active"><span><a href="#">All</a></span></li>
					<li><span><a href="#">Beer</a></span></li>
					<li><span><a href="#">Wine</a></span></li>
					<li><span><a href="#">Cock tail</a></span></li>
				</ul>
			</div>
		</div>
	</div>
</div>

<!-- 주류 추천 멘트-->
<div class="container-fluid super-dark section" style="position: relative; width: 100%;">
	<div class="container" style="position: relative; width: 100%;">
		<div class="col-xs-6 col-sm-3" style="position: relative; width: 100%;">
			<div style="font-size: 2em; color:#cbb27c"  class="counter">
				맘에 드는 제품을 선택하세요. (최대 5개)
			</div>
		</div>
	</div>
</div>

<!-- 주류 16개 나열, 클릭 시 회색 상자 -->
<div class="container-fluid super-dark section">
	<div class="container">
		<div class="row">
		{% for product in products %}
			{% if forloop.counter0|divisibleby:4 %}		
		</div>
	</div>
	<div class="container">
		<div class="row">
			{% endif %}				
			<div class="col-xs-6 col-sm-3">
				<div id={{ product.id }} style="background-color: black; margin: 5px; border-radius: 10px" class="product-click">
					<div class="counter" >				
						<img src="{% static 'images/beer/2.jpg' %}" class="svg" alt="" />
					</div>
					<h1 style="color: white; text-align: center; font-size: 1em; color:#cbb27c; font-weight:bold; margin-top:5px">{{ product.name }}</h1>
				</div>
			</div>
		{% endfor %}
		</div>
	</div>
</div>

<!-- submit 버튼 -->
<div class="container-fluid super-dark section no-padding">
	<div class="container">
		<div class="col-sm-12">
			<ul class="horz-menu center-menu pages">
				<li class="active"><span><a id='submit' >submit</a></span></li>
			</ul>
		</div>
	</div>
</div>

<!-- 추천 페이지 주류 선택 스크립트 -->
<script type="text/javascript">
	$(document).ready(function () {
		let select_count = 0
		let selected_list = []

		// product-click 버튼
		$(".product-click").click(function(event){
			$current = $(event.currentTarget)
			id = $current.attr('id')

			color = $current.css('background-color')

			if(color == "rgb(0, 0, 0)"){
				if(select_count < 5){
					$current.css('background-color', 'gray')
					select_count++
					selected_list.push(id)
				}
			}else{
				$current.css('background-color',' black')
				select_count--
				selected_list = selected_list.filter(val => val !== id)
			}

			console.log(selected_list)
		})


		// product-click 버튼
		$("#submit").click(function(event){
			if(selected_list.length === 0){
				window.alert("최소 한개이상 선택해주세요~");
				return
			}
			console.log(selected_list)
			$current = $(event.currentTarget)
			id = $current.attr('id')
		
		})
	})
</script>


{% endblock %}